<%- include('../partials/header') %>

<div class="dashboard-banner" style="background: linear-gradient(135deg, #238636 0%, #2ea043 100%);">
    <div class="banner-title">Reading History: <%= student.name %></div>
    <div class="banner-subtitle">Manage reading practice results</div>
    <div style="margin-top: 15px;">
        <a href="/admin/students" class="btn btn-nav-login" style="background: rgba(255,255,255,0.2); color: white; border: none;">&larr; Back to Students</a>
    </div>
</div>

<div class="container" style="margin-top: -30px; position: relative; z-index: 2;">
    <div class="quiz-card">
        <% if (results.length === 0) { %>
            <div style="text-align: center; padding: 40px; color: #8b949e;">
                No reading history found for this student.
            </div>
        <% } else { %>
            <div style="display: grid; gap: 15px;">
                <% results.forEach(result => { %>
                    <div style="background: #161b22; border: 1px solid #30363d; padding: 20px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                        
                        <!-- Left: Info -->
                        <div>
                            <div style="font-weight: 600; color: #e6edf3; font-size: 1.1rem;">
                                <%= new Date(result.completedAt).toLocaleDateString() %>
                                <span style="font-size: 0.8rem; color: #8b949e; margin-left: 10px;">
                                    <%= new Date(result.completedAt).toLocaleTimeString() %>
                                </span>
                            </div>
                            <div style="margin-top: 5px;">
                                <span style="font-size: 1.5rem; font-weight: bold; color: <%= (result.totalScore/result.maxScore) >= 0.7 ? '#238636' : (result.totalScore/result.maxScore) >= 0.4 ? '#e3b341' : '#f85149' %>;">
                                    <%= result.totalScore %>
                                </span>
                                <span style="color: #8b949e;"> / <%= result.maxScore %></span>
                            </div>
                        </div>

                        <!-- Right: Actions -->
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <!-- View Analysis Link (Optional, might verify if this route works for admin or needs tweaks) -->
                            <!-- Usually analysis is generic if result ID is passed, assuming authorization check allows admin -->
                            <!-- Ideally, redirect to a student-like view or just skip if not critical. 
                                 The user specifically asked to DELETE. -->
                            
                            <form action="/admin/students/reading/delete/<%= result._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this result?');" style="margin: 0;">
                                <button type="submit" class="btn btn-danger" style="background: #da3633; border: 1px solid #f85149; padding: 8px 16px;">
                                    Delete Result üóëÔ∏è
                                </button>
                            </form>
                        </div>

                    </div>
                <% }) %>
            </div>
        <% } %>
    </div>
</div>

<%- include('../partials/footer') %>
