<%- include('../partials/header') %>

<div class="dashboard-banner" style="background: linear-gradient(135deg, #1f2937, #111827);">
    <div class="banner-title" style="background: linear-gradient(90deg, #f472b6, #db2777); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">My Essay Dashboard</div>
    <div class="banner-subtitle">Practice writing and get evaluated by admins.</div>
</div>

<div style="margin-bottom: 40px; text-align: center;">
    <div style="background: rgba(30, 41, 59, 0.5); padding: 30px; border-radius: 12px; display: inline-block; border: 1px solid #30363d; max-width: 600px; width: 100%;">
        <h3 style="color: white; margin-top: 0; margin-bottom: 20px;">Start New Essay</h3>
        
        <div style="display: flex; gap: 20px; justify-content: center; margin-bottom: 20px;">
            <a href="/essay/student/start?mode=practice" class="btn btn-primary" 
               style="flex: 1; background: #238636; border: none; padding: 15px; font-size: 1rem; text-decoration: none; display: flex; flex-direction: column; gap: 5px;">
                <span style="font-size: 1.2rem;">üßò Practice Mode</span>
                <span style="font-size: 0.8rem; opacity: 0.8;">No Timer ‚Ä¢ Relaxed</span>
            </a>
            
            <a href="/essay/student/start?mode=exam" class="btn btn-primary" 
               style="flex: 1; background: #da3633; border: none; padding: 15px; font-size: 1rem; text-decoration: none; display: flex; flex-direction: column; gap: 5px;">
                <span style="font-size: 1.2rem;">‚è±Ô∏è Exam Mode</span>
                <span style="font-size: 0.8rem; opacity: 0.8;">30 Min Timer ‚Ä¢ Strict</span>
            </a>
        </div>
        <p style="margin: 0; color: #8b949e; font-size: 0.9rem;">System will pick a random topic for you.</p>
    </div>
</div>

<h2 style="color: white; margin-bottom: 20px;">My Submissions</h2>

<div class="cards-grid">
    <% if (submissions.length === 0) { %>
        <p style="color: #8b949e;">You haven't submitted any essays yet.</p>
    <% } %>

    <% submissions.forEach(sub => { %>
        <div class="quiz-card" style="border-left: 4px solid <%= sub.status === 'Checked' ? '#3fb950' : '#d29922' %>;">
            <div class="card-header">
                <span class="status-badge" style="background: #0d1117; color: #8b949e;">
                    <%= new Date(sub.createdAt).toLocaleDateString() %>
                </span>
                <span class="status-badge" 
                      style="background: <%= sub.status === 'Checked' ? 'rgba(46, 160, 67, 0.2)' : 'rgba(210, 153, 34, 0.2)' %>;
                             color: <%= sub.status === 'Checked' ? '#3fb950' : '#d29922' %>;">
                    <%= sub.status %>
                </span>
            </div>
            
            <h3 style="color: #e6edf3; margin-top: 0; font-size: 1.1rem; line-height: 1.5; min-height: 50px;">
                <%= sub.topic.topic %>
            </h3>

            <div class="card-meta">
                <% if (sub.status === 'Checked') { %>
                    <span style="font-size: 1.2rem; font-weight: 800; color: #e6edf3;">
                        Score: <span style="color: #f472b6;"><%= sub.score %></span>/10
                    </span>
                <% } else { %>
                    <span style="color: #8b949e;">Waiting for grade...</span>
                <% } %>
            </div>

            <a href="/essay/student/result/<%= sub._id %>" class="btn-start" style="margin-top: 15px;">
                View Details &rarr;
            </a>
        </div>
    <% }) %>
</div>

<%- include('../partials/footer') %>
